(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{439:function(a,s,t){"use strict";t.r(s);var e=t(2),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",{attrs:{align:"center"}},[s("img",{attrs:{src:"/img/blog/20220722134341.png"}})]),a._v(" "),s("h2",{attrs:{id:"注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[a._v("#")]),a._v(" 注意事项")]),a._v(" "),s("ul",[s("li",[a._v("本次使用的是 "),s("code",[a._v("CentOS7")])]),a._v(" "),s("li",[a._v("Rabbitmq 使用的是 "),s("code",[a._v("latest")]),a._v(" 版本，若有版本差异，请查询官方文档")])]),a._v(" "),s("h2",{attrs:{id:"安装步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[a._v("#")]),a._v(" 安装步骤")]),a._v(" "),s("h3",{attrs:{id:"一-拉取镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一-拉取镜像"}},[a._v("#")]),a._v(" 一. 拉取镜像")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull rabbitmq\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"二-启动镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二-启动镜像"}},[a._v("#")]),a._v(" 二. 启动镜像")]),a._v(" "),s("p",[a._v("注意修改用户名和密码")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15672")]),a._v(":15672 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5672")]),a._v(":5672 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RABBITMQ_DEFAULT_VHOST")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("my_vhost  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RABBITMQ_DEFAULT_USER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("admin "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RABBITMQ_DEFAULT_PASS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("admin "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" myRabbit "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" rabbitmq "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\trabbitmq\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("p",[a._v("参数说明:")]),a._v(" "),s("ul",[s("li",[a._v("-d：表示在后台运行容器；")]),a._v(" "),s("li",[a._v("-p：将容器的端口 5672（应用访问端口）和 15672 （控制台Web端口号）映射到主机中；")]),a._v(" "),s("li",[a._v("-e：指定环境变量：")]),a._v(" "),s("li",[a._v("RABBITMQ_DEFAULT_VHOST：默认虚拟机名；")]),a._v(" "),s("li",[a._v("RABBITMQ_DEFAULT_USER：默认的用户名；")]),a._v(" "),s("li",[a._v("RABBITMQ_DEFAULT_PASS：默认的用户密码；")]),a._v(" "),s("li",[a._v("--hostname：指定主机名（RabbitMQ 的一个重要注意事项是它根据所谓的 节点名称 存储数据，默认为主机名）；")]),a._v(" "),s("li",[a._v("--name rabbitmq：设置容器名称；")]),a._v(" "),s("li",[a._v("rabbitmq：容器使用的镜像名称；")])]),a._v(" "),s("p",[a._v("启动完成后可以通过 docker ps 命令来查看容器是否启动\n还可以设置docker启动时自动启动")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" update rabbitmq "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"三、启动-rabbitmq-management-rabbitmq后台管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、启动-rabbitmq-management-rabbitmq后台管理"}},[a._v("#")]),a._v(" 三、启动 rabbitmq_management (RabbitMQ后台管理)")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("//进入容器内部  我这里使用容器名字进入 也可以使用容器id\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" rabbitmq /bin/bash\n----------------------------------\n//开启web后台管理界面\nrabbitmq-plugins "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" rabbitmq_management\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h3",{attrs:{id:"四、打开web管理界面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、打开web管理界面"}},[a._v("#")]),a._v(" 四、打开web管理界面")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("浏览器输入地址 hhtp://ip:15672 即可以访问后台管理界面 这里的ip为运行RabbitMQ的服务器ip")])]),a._v(" "),s("li",[s("p",[a._v("默认的用户名和密码都是guest")])]),a._v(" "),s("li",[s("p",[a._v("但由于我们启动的时候设置了默认的用户名和密码，所以我们可以使用设置的用户名和密码登录。")])])]),a._v(" "),s("p",[s("strong",[a._v("如果无法访问 可以尝试打开防火墙 如果是在阿里或者腾讯之类的服务器 要打开安全组的端口！！\n到这里 我们docker安装RabbitMQ就完成了 接下来进行延迟插件的安装")])]),a._v(" "),s("h2",{attrs:{id:"安装延迟插件（可选）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装延迟插件（可选）"}},[a._v("#")]),a._v(" 安装延迟插件（可选）")]),a._v(" "),s("h3",{attrs:{id:"一、插件下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、插件下载"}},[a._v("#")]),a._v(" 一、插件下载")]),a._v(" "),s("p",[a._v("下载地址\nhttps://www.rabbitmq.com/community-plugins.html")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/blog/20220722135818.png",alt:"img"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/blog/20220722135831.png",alt:"img"}})]),a._v(" "),s("p",[s("strong",[a._v("进入web端后左上角有显示当前安装的RabbitMQ版本")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/blog/20220722135852.png",alt:"img"}})]),a._v(" "),s("p",[s("strong",[a._v("我这里安装的是3.10版本所以我直接下载最新版的插件就可以")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/blog/20220722135916.png",alt:"img"}})]),a._v(" "),s("h3",{attrs:{id:"二、将插件上传至服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、将插件上传至服务器"}},[a._v("#")]),a._v(" 二、将插件上传至服务器")]),a._v(" "),s("p",[s("strong",[a._v("将刚刚上传的插件拷贝到容器内plugins目录下")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /root/rabbitmq_delayed_message_exchange-3.10.2.ez rabbitmq:/plugins\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("上传之后进入容器内部")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("//进入容器 我这里使用容器名字 也可以用容器id进入\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" rabbitmq /bin/bash\n-------------------------------------\n//移动到plugins目录下\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" plugins\n-------------------------------------\n//查看是否上传成功\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[s("img",{attrs:{src:"/img/blog/20220722140054.png",alt:"img"}})]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rabbitmq-plugins "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" rabbitmq_delayed_message_exchange\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"/img/blog/20220722140124.jpeg",alt:"img"}})]),a._v(" "),s("p",[s("strong",[a._v("安装成功后 退出容器")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("然后重启容器")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("//我这里还是使用容器名称 也可以使用容器id\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" restart rabbitmq\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("容器启动成功之后，登录RabbitMQ的管理界面（ip:15672 访问web界面），找到ExchangesTab页。点击Add a new exchange，在Type里面查看是否有x-delayed-message选项，如果存在就代表插件安装成功。")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/blog/20220722140453.png",alt:"img"}})]),a._v(" "),s("p",[s("strong",[a._v("到这里我们的docker 安装RabbitMQ及延迟插件的安装就已经结束了！！")])]),a._v(" "),s("h2",{attrs:{id:"原文地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原文地址"}},[a._v("#")]),a._v(" 原文地址")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/q66562636/article/details/125277473",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://blog.csdn.net/q66562636/article/details/125277473"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);